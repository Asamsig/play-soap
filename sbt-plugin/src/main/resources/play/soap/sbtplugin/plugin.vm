package $service.packageName

import javax.xml.namespace.QName
#if ($mark-generated == "true")
import javax.annotation.Generated
#end

#foreach ($import in $service.imports)
import ${import}
#end
/**
* This class was generated by $fullversion
* $currentdate
* Generated source version: $version
*
*/
#if ($mark-generated == "true")
@Generated(value = "$generatorclass", date = "$currentdate", comments = "$fullversion")
#end
class ${service.name}(app: play.api.Application) extends play.soap.PlaySoapPlugin(app) {
#foreach ($port in $service.ports)

  #set($portClassName = ${port.interfaceClass})
  #if ($portClassName == ${service.name})
    #set($portClassName = ${port.fullClassName})
  #end

  #if ($mark-generated == "true")
  @Generated(value = "$generatorclass", date = "$currentdate")
  #end
  lazy val $portMethod.transform($port): $portClassName = {
    createPort[$portClassName](new QName("$service.namespace"), "$port.portName", "$port.address")
  }
#end
}

object ${service.name} {
#foreach ($port in $service.ports)
  #set($portMethodName = $portMethod.transform($port))
  #set($portClassName = ${port.interfaceClass})
  #if ($portClassName == ${service.name})
    #set($portClassName = ${port.fullClassName})
  #end

  def ${portMethodName}(implicit app: play.api.Application): $portClassName = {
    app.plugin[$service.name] match {
      case Some(plugin) => plugin.$portMethodName
      case None => throw new IllegalStateException("Plugin $service.name is not registered")
    }
  }

  def ${port.methodName}(): $portClassName = ${portMethodName}(play.api.Play.current)
#end
}